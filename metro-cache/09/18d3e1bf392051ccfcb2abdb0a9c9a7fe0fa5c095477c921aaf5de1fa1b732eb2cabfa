{"dependencies":[{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"./options","data":{"isAsync":false}},{"name":"./string","data":{"isAsync":false}},{"name":"./literal","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _extends = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/extends\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = createTemplateBuilder;\n\n  var _options = _$$_REQUIRE(_dependencyMap[1], \"./options\");\n\n  var _string = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"./string\"));\n\n  var _literal = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./literal\"));\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  var NO_PLACEHOLDER = (0, _options.validate)({\n    placeholderPattern: false\n  });\n\n  function createTemplateBuilder(formatter, defaultOpts) {\n    var templateFnCache = new WeakMap();\n    var templateAstCache = new WeakMap();\n    var cachedOpts = defaultOpts || (0, _options.validate)(null);\n    return _extends(function (tpl) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (typeof tpl === \"string\") {\n        if (args.length > 1) throw new Error(\"Unexpected extra params.\");\n        return extendedTrace((0, _string.default)(formatter, tpl, (0, _options.merge)(cachedOpts, (0, _options.validate)(args[0]))));\n      } else if (Array.isArray(tpl)) {\n        var builder = templateFnCache.get(tpl);\n\n        if (!builder) {\n          builder = (0, _literal.default)(formatter, tpl, cachedOpts);\n          templateFnCache.set(tpl, builder);\n        }\n\n        return extendedTrace(builder(args));\n      } else if (typeof tpl === \"object\" && tpl) {\n        if (args.length > 0) throw new Error(\"Unexpected extra params.\");\n        return createTemplateBuilder(formatter, (0, _options.merge)(cachedOpts, (0, _options.validate)(tpl)));\n      }\n\n      throw new Error(\"Unexpected template param \" + typeof tpl);\n    }, {\n      ast: function ast(tpl) {\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        if (typeof tpl === \"string\") {\n          if (args.length > 1) throw new Error(\"Unexpected extra params.\");\n          return (0, _string.default)(formatter, tpl, (0, _options.merge)((0, _options.merge)(cachedOpts, (0, _options.validate)(args[0])), NO_PLACEHOLDER))();\n        } else if (Array.isArray(tpl)) {\n          var builder = templateAstCache.get(tpl);\n\n          if (!builder) {\n            builder = (0, _literal.default)(formatter, tpl, (0, _options.merge)(cachedOpts, NO_PLACEHOLDER));\n            templateAstCache.set(tpl, builder);\n          }\n\n          return builder(args)();\n        }\n\n        throw new Error(\"Unexpected template param \" + typeof tpl);\n      }\n    });\n  }\n\n  function extendedTrace(fn) {\n    var rootStack = \"\";\n\n    try {\n      throw new Error();\n    } catch (error) {\n      if (error.stack) {\n        rootStack = error.stack.split(\"\\n\").slice(3).join(\"\\n\");\n      }\n    }\n\n    return function (arg) {\n      try {\n        return fn(arg);\n      } catch (err) {\n        err.stack += \"\\n    =============\\n\" + rootStack;\n        throw err;\n      }\n    };\n  }\n});","map":[[2,0,1,0],[6,0,3,0,"Object"],[6,2,3,0,"Object"],[6,8,3,6],[6,9,3,7,"defineProperty"],[6,23,3,0],[6,24,3,22,"exports"],[6,31,3,0],[6,33,3,31],[6,45,3,0],[6,47,3,45],[7,0,4,2,"value"],[7,4,4,2,"value"],[7,9,4,7],[7,11,4,9],[8,0,3,45],[8,3,3,0],[9,0,6,0,"exports"],[9,2,6,0,"exports"],[9,9,6,7],[9,10,6,8,"default"],[9,17,6,0],[9,20,6,18,"createTemplateBuilder"],[9,41,6,0],[11,0,8,0],[11,6,8,4,"_options"],[11,14,8,12],[11,17,8,15,"require"],[11,28,8,22],[11,60,8,0],[13,0,10,0],[13,6,10,4,"_string"],[13,13,10,11],[13,16,10,14,"_interopRequireDefault"],[13,38,10,36],[13,39,10,37,"require"],[13,50,10,44],[13,81,10,36],[13,82,10,0],[15,0,12,0],[15,6,12,4,"_literal"],[15,14,12,12],[15,17,12,15,"_interopRequireDefault"],[15,39,12,37],[15,40,12,38,"require"],[15,51,12,45],[15,83,12,37],[15,84,12,0],[17,0,14,0],[17,11,14,9,"_interopRequireDefault"],[17,33,14,0],[17,34,14,32,"obj"],[17,37,14,0],[17,39,14,37],[18,0,14,39],[18,11,14,46,"obj"],[18,14,14,49],[18,18,14,53,"obj"],[18,21,14,56],[18,22,14,57,"__esModule"],[18,32,14,46],[18,35,14,70,"obj"],[18,38,14,46],[18,41,14,76],[19,0,14,78,"default"],[19,6,14,78,"default"],[19,13,14,85],[19,15,14,87,"obj"],[20,0,14,76],[20,5,14,39],[21,0,14,95],[23,0,16,0],[23,6,16,6,"NO_PLACEHOLDER"],[23,20,16,20],[23,23,16,23],[23,24,16,24],[23,27,16,27,"_options"],[23,35,16,35],[23,36,16,36,"validate"],[23,44,16,23],[23,46,16,46],[24,0,17,2,"placeholderPattern"],[24,4,17,2,"placeholderPattern"],[24,22,17,20],[24,24,17,22],[25,0,16,46],[25,3,16,23],[25,4,16,0],[27,0,20,0],[27,11,20,9,"createTemplateBuilder"],[27,32,20,0],[27,33,20,31,"formatter"],[27,42,20,0],[27,44,20,42,"defaultOpts"],[27,55,20,0],[27,57,20,55],[28,0,21,2],[28,8,21,8,"templateFnCache"],[28,23,21,23],[28,26,21,26],[28,30,21,30,"WeakMap"],[28,37,21,26],[28,39,21,2],[29,0,22,2],[29,8,22,8,"templateAstCache"],[29,24,22,24],[29,27,22,27],[29,31,22,31,"WeakMap"],[29,38,22,27],[29,40,22,2],[30,0,23,2],[30,8,23,8,"cachedOpts"],[30,18,23,18],[30,21,23,21,"defaultOpts"],[30,32,23,32],[30,36,23,36],[30,37,23,37],[30,40,23,40,"_options"],[30,48,23,48],[30,49,23,49,"validate"],[30,57,23,36],[30,59,23,59],[30,63,23,36],[30,64,23,2],[31,0,24,2],[31,11,24,9],[31,20,24,23],[31,30,24,24,"tpl"],[31,33,24,23],[31,35,24,41],[32,0,24,41],[32,40,24,32,"args"],[32,44,24,41],[33,0,24,32,"args"],[33,8,24,32,"args"],[33,12,24,41],[34,0,24,41],[36,0,25,4],[36,10,25,8],[36,17,25,15,"tpl"],[36,20,25,8],[36,25,25,23],[36,33,25,4],[36,35,25,33],[37,0,26,6],[37,12,26,10,"args"],[37,16,26,14],[37,17,26,15,"length"],[37,23,26,10],[37,26,26,24],[37,27,26,6],[37,29,26,27],[37,35,26,33],[37,39,26,37,"Error"],[37,44,26,33],[37,45,26,43],[37,71,26,33],[37,72,26,27],[38,0,27,6],[38,15,27,13,"extendedTrace"],[38,28,27,26],[38,29,27,27],[38,30,27,28],[38,33,27,31,"_string"],[38,40,27,38],[38,41,27,39,"default"],[38,48,27,27],[38,50,27,48,"formatter"],[38,59,27,27],[38,61,27,59,"tpl"],[38,64,27,27],[38,66,27,64],[38,67,27,65],[38,70,27,68,"_options"],[38,78,27,76],[38,79,27,77,"merge"],[38,84,27,64],[38,86,27,84,"cachedOpts"],[38,96,27,64],[38,98,27,96],[38,99,27,97],[38,102,27,100,"_options"],[38,110,27,108],[38,111,27,109,"validate"],[38,119,27,96],[38,121,27,119,"args"],[38,125,27,123],[38,126,27,124],[38,127,27,123],[38,128,27,96],[38,129,27,64],[38,130,27,27],[38,131,27,26],[38,132,27,6],[39,0,28,5],[39,7,25,4],[39,13,28,11],[39,17,28,15,"Array"],[39,22,28,20],[39,23,28,21,"isArray"],[39,30,28,15],[39,31,28,29,"tpl"],[39,34,28,15],[39,35,28,11],[39,37,28,35],[40,0,29,6],[40,12,29,10,"builder"],[40,19,29,17],[40,22,29,20,"templateFnCache"],[40,37,29,35],[40,38,29,36,"get"],[40,41,29,20],[40,42,29,40,"tpl"],[40,45,29,20],[40,46,29,6],[42,0,31,6],[42,12,31,10],[42,13,31,11,"builder"],[42,20,31,6],[42,22,31,20],[43,0,32,8,"builder"],[43,10,32,8,"builder"],[43,17,32,15],[43,20,32,18],[43,21,32,19],[43,24,32,22,"_literal"],[43,32,32,30],[43,33,32,31,"default"],[43,40,32,18],[43,42,32,40,"formatter"],[43,51,32,18],[43,53,32,51,"tpl"],[43,56,32,18],[43,58,32,56,"cachedOpts"],[43,68,32,18],[43,69,32,8],[44,0,33,8,"templateFnCache"],[44,10,33,8,"templateFnCache"],[44,25,33,23],[44,26,33,24,"set"],[44,29,33,8],[44,30,33,28,"tpl"],[44,33,33,8],[44,35,33,33,"builder"],[44,42,33,8],[45,0,34,7],[47,0,36,6],[47,15,36,13,"extendedTrace"],[47,28,36,26],[47,29,36,27,"builder"],[47,36,36,34],[47,37,36,35,"args"],[47,41,36,34],[47,42,36,26],[47,43,36,6],[48,0,37,5],[48,7,28,11],[48,13,37,11],[48,17,37,15],[48,24,37,22,"tpl"],[48,27,37,15],[48,32,37,30],[48,40,37,15],[48,44,37,42,"tpl"],[48,47,37,11],[48,49,37,47],[49,0,38,6],[49,12,38,10,"args"],[49,16,38,14],[49,17,38,15,"length"],[49,23,38,10],[49,26,38,24],[49,27,38,6],[49,29,38,27],[49,35,38,33],[49,39,38,37,"Error"],[49,44,38,33],[49,45,38,43],[49,71,38,33],[49,72,38,27],[50,0,39,6],[50,15,39,13,"createTemplateBuilder"],[50,36,39,34],[50,37,39,35,"formatter"],[50,46,39,34],[50,48,39,46],[50,49,39,47],[50,52,39,50,"_options"],[50,60,39,58],[50,61,39,59,"merge"],[50,66,39,46],[50,68,39,66,"cachedOpts"],[50,78,39,46],[50,80,39,78],[50,81,39,79],[50,84,39,82,"_options"],[50,92,39,90],[50,93,39,91,"validate"],[50,101,39,78],[50,103,39,101,"tpl"],[50,106,39,78],[50,107,39,46],[50,108,39,34],[50,109,39,6],[51,0,40,5],[53,0,42,4],[53,12,42,10],[53,16,42,14,"Error"],[53,21,42,10],[53,53,42,49],[53,60,42,56,"tpl"],[53,63,42,10],[53,64,42,4],[54,0,43,3],[54,5,24,9],[54,7,43,5],[55,0,44,4,"ast"],[55,6,44,4,"ast"],[55,9,44,7],[55,11,44,9],[55,24,44,10,"tpl"],[55,27,44,9],[55,29,44,27],[56,0,44,27],[56,43,44,18,"args"],[56,47,44,27],[57,0,44,18,"args"],[57,10,44,18,"args"],[57,14,44,27],[58,0,44,27],[60,0,45,6],[60,12,45,10],[60,19,45,17,"tpl"],[60,22,45,10],[60,27,45,25],[60,35,45,6],[60,37,45,35],[61,0,46,8],[61,14,46,12,"args"],[61,18,46,16],[61,19,46,17,"length"],[61,25,46,12],[61,28,46,26],[61,29,46,8],[61,31,46,29],[61,37,46,35],[61,41,46,39,"Error"],[61,46,46,35],[61,47,46,45],[61,73,46,35],[61,74,46,29],[62,0,47,8],[62,17,47,15],[62,18,47,16],[62,21,47,19,"_string"],[62,28,47,26],[62,29,47,27,"default"],[62,36,47,15],[62,38,47,36,"formatter"],[62,47,47,15],[62,49,47,47,"tpl"],[62,52,47,15],[62,54,47,52],[62,55,47,53],[62,58,47,56,"_options"],[62,66,47,64],[62,67,47,65,"merge"],[62,72,47,52],[62,74,47,72],[62,75,47,73],[62,78,47,76,"_options"],[62,86,47,84],[62,87,47,85,"merge"],[62,92,47,72],[62,94,47,92,"cachedOpts"],[62,104,47,72],[62,106,47,104],[62,107,47,105],[62,110,47,108,"_options"],[62,118,47,116],[62,119,47,117,"validate"],[62,127,47,104],[62,129,47,127,"args"],[62,133,47,131],[62,134,47,132],[62,135,47,131],[62,136,47,104],[62,137,47,72],[62,138,47,52],[62,140,47,138,"NO_PLACEHOLDER"],[62,154,47,52],[62,155,47,15],[62,158,47,8],[63,0,48,7],[63,9,45,6],[63,15,48,13],[63,19,48,17,"Array"],[63,24,48,22],[63,25,48,23,"isArray"],[63,32,48,17],[63,33,48,31,"tpl"],[63,36,48,17],[63,37,48,13],[63,39,48,37],[64,0,49,8],[64,14,49,12,"builder"],[64,21,49,19],[64,24,49,22,"templateAstCache"],[64,40,49,38],[64,41,49,39,"get"],[64,44,49,22],[64,45,49,43,"tpl"],[64,48,49,22],[64,49,49,8],[66,0,51,8],[66,14,51,12],[66,15,51,13,"builder"],[66,22,51,8],[66,24,51,22],[67,0,52,10,"builder"],[67,12,52,10,"builder"],[67,19,52,17],[67,22,52,20],[67,23,52,21],[67,26,52,24,"_literal"],[67,34,52,32],[67,35,52,33,"default"],[67,42,52,20],[67,44,52,42,"formatter"],[67,53,52,20],[67,55,52,53,"tpl"],[67,58,52,20],[67,60,52,58],[67,61,52,59],[67,64,52,62,"_options"],[67,72,52,70],[67,73,52,71,"merge"],[67,78,52,58],[67,80,52,78,"cachedOpts"],[67,90,52,58],[67,92,52,90,"NO_PLACEHOLDER"],[67,106,52,58],[67,107,52,20],[67,108,52,10],[68,0,53,10,"templateAstCache"],[68,12,53,10,"templateAstCache"],[68,28,53,26],[68,29,53,27,"set"],[68,32,53,10],[68,33,53,31,"tpl"],[68,36,53,10],[68,38,53,36,"builder"],[68,45,53,10],[69,0,54,9],[71,0,56,8],[71,17,56,15,"builder"],[71,24,56,22],[71,25,56,23,"args"],[71,29,56,22],[71,30,56,15],[71,32,56,8],[72,0,57,7],[74,0,59,6],[74,14,59,12],[74,18,59,16,"Error"],[74,23,59,12],[74,55,59,51],[74,62,59,58,"tpl"],[74,65,59,12],[74,66,59,6],[75,0,60,5],[76,0,43,5],[76,5,24,9],[76,6,24,2],[77,0,62,1],[79,0,64,0],[79,11,64,9,"extendedTrace"],[79,24,64,0],[79,25,64,23,"fn"],[79,27,64,0],[79,29,64,27],[80,0,65,2],[80,8,65,6,"rootStack"],[80,17,65,15],[80,20,65,18],[80,22,65,2],[82,0,67,2],[82,8,67,6],[83,0,68,4],[83,12,68,10],[83,16,68,14,"Error"],[83,21,68,10],[83,23,68,4],[84,0,69,3],[84,5,67,2],[84,6,69,4],[84,13,69,11,"error"],[84,18,69,4],[84,20,69,18],[85,0,70,4],[85,10,70,8,"error"],[85,15,70,13],[85,16,70,14,"stack"],[85,21,70,4],[85,23,70,21],[86,0,71,6,"rootStack"],[86,8,71,6,"rootStack"],[86,17,71,15],[86,20,71,18,"error"],[86,25,71,23],[86,26,71,24,"stack"],[86,31,71,18],[86,32,71,30,"split"],[86,37,71,18],[86,38,71,36],[86,42,71,18],[86,44,71,42,"slice"],[86,49,71,18],[86,50,71,48],[86,51,71,18],[86,53,71,51,"join"],[86,57,71,18],[86,58,71,56],[86,62,71,18],[86,63,71,6],[87,0,72,5],[88,0,73,3],[90,0,75,2],[90,11,75,9],[90,21,75,9,"arg"],[90,24,75,12],[90,26,75,16],[91,0,76,4],[91,10,76,8],[92,0,77,6],[92,15,77,13,"fn"],[92,17,77,15],[92,18,77,16,"arg"],[92,21,77,15],[92,22,77,6],[93,0,78,5],[93,7,76,4],[93,8,78,6],[93,15,78,13,"err"],[93,18,78,6],[93,20,78,18],[94,0,79,6,"err"],[94,8,79,6,"err"],[94,11,79,9],[94,12,79,10,"stack"],[94,17,79,6],[94,47,79,43,"rootStack"],[94,56,79,6],[95,0,80,6],[95,14,80,12,"err"],[95,17,80,6],[96,0,81,5],[97,0,82,3],[97,5,75,2],[98,0,83,1]]},"type":"js/module"}]}